

20150903
需要买的
新西达无刷电机电调	4	200
飞桨			8	40
mwc飞控			1	100
机架			1	50
电池			1	100
遥控器			1	300
代码烧录器？
总计				790


参考资料
http://code.google.com/p/multiwii/downloads/list
http://www.amobbs.com/thread-5546057-1-1.html
http://yfrobot.com/forum.php?mod=viewthread&tid=2404&extra=page%3D13

飞控PID算法分析
http://blog.csdn.net/do335maomao/article/details/43899003
http://blog.csdn.net/super_mice/article/details/38436723




20150912
今天拿到最后一个零件电池，可以开始调试了。
现在电调的油门可以校准了。
校准方法：
1.电调、电机、接收机掉电。
2.打开遥控器，油门调到最大
3.连接接收机等电路，电机短暂音乐后响两声，马上把油门拉到最低，听到确认的响声。
这样就完成校准，可以控制了。

另外，ch1不能用来校准，ch3可以，原因未知。

跟这个视频类似
http://v.youku.com/v_show/id_XNzQzNTg5Mzky.html?from=y1.2-1-98.4.8-1.1-1-2-7-0






MultiWiiWinGUI 开源 地址
https://code.google.com/p/mw-wingui/





FTDI接上后一直是这个错误，后来发现是连线完全反过来了，连对了就OK。
 avrdude: stk500_recv(): programmer is not responding
 
 
 
 
MWC 打印log
要用MultiWiiWinGUI才能抓出log
#ifdef DEBUGMSG
  debugmsg_append_str("go_disarm\n");//jack.zheng
#endif
 
 
 
 
 itoa 整形转字符串 用法
   int main(void)     
  {     
        int  number   =   12345;     
        char string[25];     
        itoa(number, string,10);     
        printf("integer   =   %d   string   =   %s\n",   number,   string);     
        return   0;     
  }
  
  
  
  
  
mwc连线
主要分为以下5个部分：
1、接收机接收部分
2、电调、电机控制部分
3、通信接口（用来烧录程序以及修改参数）
4、蓝牙接口（后期调试非常有用，可以利用手机进行调试）
5、I2C接口（扩展GPS模块）

1、接收机接收部分：
引脚对应关系如下，（这里以国产天七遥控做说明，其他控请参考遥控器手册）
－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
MWC Pin:                       接收机 Pin：                         功能：
   G                                  －                                   地，负极
   V                                   +                                   电源，正极
   D2                                 3                                    THRO，油门 
   D4                                 1                                    ROLL，副翼
   D5                                 2                                    PIT，升降
   D6                                 4                                    YAW，方向
   D7                                 5                                    MODEL，模式位  
－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－
注：这里只只有D2是通过GVS的3P线连接到飞控板的，其他通过单P线连接即可。因为遥控的所有接收端 GND和VCC是相通的。
实物接线如下：





http://www.yfrobot.com/forum.php?mod=viewthread&tid=2404

http://blog.sina.com.cn/s/blog_8104d1d00100swia.html





ACCEL
轴指向地心时，值应该为负1G。
MAG
轴指向正北时，值应该为正最大值。






angle：应该常开，自稳模式，摇杆回中后自动保持水平，是什么时候都以水平姿态为基准的。
horizon：介于全手动与自稳之间，摇杆回中时保持当前状态实时更新姿态初始位置
好像说选择horizon模式后，飞机倾斜角度小于45°的时候，摇杆回中时，飞机就会自动恢复水平（自稳）。
飞机倾斜角度大于45°时，就会变到手动模式，摇杆回中时，飞机不会恢复水平。
BARO：气压定高
MAG：地磁方向锁定，即不动摇杆时方向保持，不会被外部风力影响
CAMSTAB：云台控制
ARM：解锁
HEADFREE：无头模式，例如在解锁前，方向与控一致时，解锁后，无论如何自旋，控的方向与解锁前一致
HEADADJ：重新指定无头模式的方向，需看清当前的头尾方向，按当前方向确定无头模式

mwc的第五通道就是angle。







在航空中，pitch, yaw, roll，
pitch是围绕X轴旋转，也叫做俯仰角。
yaw是围绕Y轴旋转，也叫偏航角。
roll是围绕Z轴旋转，也叫翻滚角。





电压报警器 连线
连电池的充电口，红线对3s，其他3根黑线对2s、1s、-。



wmc 2.5的板子，在pitch roll yaw的方向上，不需要改动，只要打开CRIUS_SE_v2_0就是正确的。




20150922
今晚去掉2个螺旋桨校准参数，不用任何改动就看起来挺稳定。
今晚第一次正式试飞，失败。
螺旋桨打滑，抖动，直接掉出来了，明天能拿到铁丝，绑紧了再试。







这是打开就是使用channel 6
#define RCAUXPIN8




20150923 第二次测试-失败
用塑料带绑紧螺旋桨，确保桨不会掉出来，再测试还是起不来，油门已经加到最大，
电池也是有电的 4.1v。
加到最大油门，有一边在抖动，然后失衡，打到地上，还好都没坏。


问题debug
明天把log关掉，FTDI拔掉，再试一次。是否和陀螺仪滤波有关？
pitch roll不在1500，需要调节？
低通滤波器 98Hz或者42Hz?
为什么有一个桨，在上锁的情况下，也能自动转起来，非常奇怪。
1，油门校准，2把自稳关掉，3调整好pid？
“搞定了，就是电调行程没有校准。 直接使用MWC代码里面有一个校准行程的配置，1分钟就搞定了。”---网贴
http://code.google.com/p/multiwii/wiki/ESCsCalibration
“今晚成功起飞mwc，默认参数，450机架，底通滤波98hz，2212kv980 ”
起飞前做ACCEL/GYRO/MAG校准？
“楼主的问题我可以帮你解决，首先把楼主的控的油门，升降，副翼，方向这四个通道的数据严格按照最高低位1095，中1500，高1995调试好，
然后从新刷固件，打开固件把固件里的怠速设置稍微调高，30为一个档次，然后写入固件，再上电池测试解锁后推油门四个电机是不是一起转，
如果不是，继续调高油门怠速设置。以此类推。还得把解锁马达停转开启；保证你能飞起来。但是四个电调的油门行程必须用一分四的线同时校准。”
“如果是加油门最大也起飞不起来的话，请改滤波为20Mz一下”
“我的也一样，才弄好，将你刷的固件里的42HZ改成20HZ就可以了，我的也是2.2的固件。不要看GUI没有关联。”